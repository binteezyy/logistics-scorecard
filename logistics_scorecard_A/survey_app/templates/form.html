{% extends "base.html" %}

{% block add_script %}
<script>
    $(document).ready(function () {
        {% for x in scorecard.category_list.all %}
        $(".radi{{ x.category_number }}").click(function () {
            var total = 0;
            $(".radi{{ x.category_number }}:checked").each(function () { total += +this.value; });
            $("#total{{ x.category_number }}").html(total);
        });
        {% endfor %}
    });
</script>
{% endblock add_script %}

{% block form %}
<div class="container">
    <img src="https://www.avnet.com/opasdata/d120001/derivates/3/072/351/Artesyn_logo_web.png">
    <a class="btn btn-outline-dark border-0 float-right m-4" href={% url 'logout' %}>Logout</a>
</div>
      <div class="container">
            <div class="card border-0 bg-light">
                    <div class="card-body">
                      <h4 class="card-title">Scorecard ID: {{scorecard.cid}} - {{ scorecard.date_released|date:'M-d-Y' }}</h4>
                      <h5 class="card-title">{{ scorecard.provider }}{% for z in scorecard.provider.services.all %}-{{z.name}}{%endfor%}</h5>
                      <h6 class="card-subtitle mb-2 text-primary">Account Manager: {{ scorecard.account_manager }}</h6>
                      <h6 class="card-subtitle mb-2">Email: {{ scorecard.account_manager.email }}</h6>
                      <h6 class="card-subtitle mb-2">Month Covered: {{ scorecard.month_covered|date:'F' }}</h6>
                    </div>
                  </div>
<form action="#" method="POST">
    {% for x in scorecard.category_list.all %}
    <h5>{{ x.category_number }}. {{ x.category_name }}</h5>
    {% csrf_token %}
    <table class="table table-striped table-hover table-bordered">
        <thead class="thead-dark text-center h5 ">
            <tr>
                <th scope="col">#</th>
                <th scope="col">Question</th>
                <th scope="col">Weight</th>
                <th scope="col">Rating</th>
                <th scope="col">Value</th>
                <th scope="col">Feedback</th>

            </tr>
        </thead>
        <tbody>
                {% for y in x.questions.all %}
            <tr class="h6">
                <th class="text-center"> {{ y.question_number }} </th>
                <!-- <td class="text-left">Are you satisfied?Are you satisfied?Are you satisfied?Are you
                        satisfied?Are you
                        satisfied?Are you satisfied?</td> -->
                <td class="text-left" style="width: 12%;"> {{ y.question_string }}</td>
                <td class="text-center"> {{ y.multiplier }} </td>
                <td class="text-center">
                    <div class="form-check custom-control-inline">
                        <label class="form-check-label">
                            <input value="1" type="radio" class="form-check-input radi{{x.category_number}}"
                                name="optradio{{y.pk}}"
                                onclick="document.getElementById('{{y.pk}}').innerHTML=0.1; changeThis();">1
                        </label>
                    </div>
                    <div class=" form-check custom-control-inline">
                        <label class="form-check-label">
                            <input value="2" type="radio" class="form-check-input radi{{x.category_number}}"
                                name="optradio{{y.pk}}"
                                onclick="document.getElementById('{{y.pk}}').innerHTML=0.2; addTotal()">2
                        </label>
                    </div>
                    <div class="form-check custom-control-inline">
                        <label class="form-check-label">
                            <input value="3" type="radio" class="form-check-input radi{{x.category_number}}"
                                name="optradio{{y.pk}}"
                                onclick="document.getElementById('{{y.pk}}').innerHTML=0.3; addTotal()">3
                        </label>
                    </div>
                    <div class="form-check custom-control-inline">
                        <label class="form-check-label">
                            <input value="4" type="radio" class="form-check-input radi{{x.category_number}}"
                                name="optradio{{y.pk}}"
                                onclick="document.getElementById('{{y.pk}}').innerHTML=0.4; addTotal()">4
                        </label>
                    </div>
                    <div class="form-check custom-control-inline">
                        <label class="form-check-label">
                            <input value="5" type="radio" class="form-check-input radi{{x.category_number}}"
                                name="optradio{{y.pk}}"
                                onclick="document.getElementById('{{y.pk}}').innerHTML=0.5;"> 5
                        </label>
                    </div>
                </td>
                <td class="text-center" id="{{y.pk}}"></td>
                </td>
                <td></td>
            </tr>
            {% endfor %}
            <tr class="h6">
                <td></td>
                <td></td>
                <td></td>
                <td class="text-center">
                    <text >Total:</text>
                </td>
                <td class="text-center">
                    <text name="total" id="total{{x.category_number}}" ></text>
                </td>
                <td>
                </td>
            </tr>
        </tbody>
    </table>
    {% endfor %}
</form>
</div>
<a href={% url 'logout' %}>Logout</a>
{% endblock form %}
