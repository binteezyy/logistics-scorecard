{% extends "base.html" %}

{% block add_script %}
<script>
    $(document).ready(function () {
        {% for x in scorecard.category_list.all %}
        {% for y in x.questions.all %}
        $(".radi{{ x.category_number }}").click(function () {
            var total = 0;
            // $(".radi{{ x.category_number }}:checked").each(function () {
            //     total += +(this.value);
            // });
            $('.totalr{{x.category_number}}').each(function () {
                total += +(this.value);
            });
            $("#totalc{{ x.category_number }}").html(total);

            //var totalall = 0;

            //("#totalall").html(totalall);

        });

        $(".radi{{ x.category_number }}").click(function () {

            var totalall = 0;
            var total = 0;
            var totalz = $('.totalcolumn').each(function () {
                total += +(parseInt(this.text));
            });
            console.log(totalz);

        });
        {% endfor %}
        {% endfor %}

    });

</script>
{% endblock add_script %}

{% block form %}
<div class="container">
    <div class="card border-0 bg-light">
        <div class="card-body">
            <h4 class="card-title">Scorecard ID: {{scorecard.cid}} - {{ scorecard.date_released|date:'M-d-Y' }}</h4>
            <h5 class="card-title">
                {{ scorecard.provider }}{% for z in scorecard.provider.services.all %}-{{z.name}}{%endfor%}</h5>
            <h6 class="card-subtitle mb-2 text-primary">Account Manager: {{ scorecard.account_manager }}</h6>
            <h6 class="card-subtitle mb-2">Email: {{ scorecard.account_manager.email }}</h6>
            <h6 class="card-subtitle mb-2">Month Covered: {{ scorecard.month_covered|date:'F' }}</h6>
        </div>
    </div>
    <form action="#" method="POST">
        {% for x in scorecard.category_list.all %}
        <h5>{{ x.category_number }}. {{ x.category_name }}</h5>
        {% csrf_token %}
        <table class="table table-striped table-hover table-bordered">
            <thead class="thead-dark text-center h5 ">
                <tr>
                    <th scope="col">#</th>
                    <th scope="col">Question</th>
                    <th scope="col">Weight</th>
                    <th scope="col">Rating</th>
                    <th scope="col">Value</th>
                    <th scope="col">Feedback</th>

                </tr>
            </thead>
            <tbody>
                {% for y in x.questions.all %}
                <tr class="h6">
                    <th class="text-center"> {{ y.question_number }} </th>
                    <td class="text-left" style="width: 12%;"> {{ y.question_string }}</td>
                    <td class="text-center" id="weight{{y.pk}}" value="">
                        {{y.multiplier}}
                    </td>
                    <td class="text-center">
                        <div class="form-check custom-control-inline">
                            <label class="form-check-label">
                                <input value="1" type="radio" class="form-check-input radi{{x.category_number}}"
                                    name="optradio{{y.pk}}"
                                    onclick="$('#{{y.pk}}').val(
                                    document.getElementById('weight{{y.pk}}').innerHTML * 1);
                                document.getElementById('{{y.pk}}').innerHTML = document.getElementById('{{y.pk}}').value;">1
                            </label>
                        </div>
                        <div class=" form-check custom-control-inline">
                            <label class="form-check-label">
                                <input value="2" type="radio" class="form-check-input radi{{x.category_number}}"
                                    name="optradio{{y.pk}}"
                                    onclick="document.getElementById('{{y.pk}}').value= 
                                    document.getElementById('weight{{y.pk}}').innerHTML * 2;
                                    document.getElementById('{{y.pk}}').innerHTML = document.getElementById('{{y.pk}}').value;">2
                            </label>
                        </div>
                        <div class="form-check custom-control-inline">
                            <label class="form-check-label">
                                <input value="3" type="radio" class="form-check-input radi{{x.category_number}}"
                                    name="optradio{{y.pk}}"
                                    onclick="document.getElementById('{{y.pk}}').value= 
                                    document.getElementById('weight{{y.pk}}').innerHTML * 3;
                                    document.getElementById('{{y.pk}}').innerHTML = document.getElementById('{{y.pk}}').value;">3
                            </label>
                        </div>
                        <div class="form-check custom-control-inline">
                            <label class="form-check-label">
                                <input value="4" type="radio" class="form-check-input radi{{x.category_number}}"
                                    name="optradio{{y.pk}}"
                                    onclick="document.getElementById('{{y.pk}}').value= 
                                    document.getElementById('weight{{y.pk}}').innerHTML * 4;
                                    document.getElementById('{{y.pk}}').innerHTML = document.getElementById('{{y.pk}}').value;">4
                            </label>
                        </div>
                        <div class="form-check custom-control-inline">
                            <label class="form-check-label">
                                <input value="5" type="radio" class="form-check-input radi{{x.category_number}}"
                                    name="optradio{{y.pk}}"
                                    onclick="document.getElementById('{{y.pk}}').value= 
                                    document.getElementById('weight{{y.pk}}').innerHTML * 5;
                                    document.getElementById('{{y.pk}}').innerHTML = document.getElementById('{{y.pk}}').value;">NA
                            </label>
                        </div>
                    </td>
                    <td class="text-center">
                        <text value="0" name="totalr" id="{{y.pk}}" class="totalr{{x.category_number}}">0</text>
                    </td>
                    </td>
                    <td></td>
                </tr>
                {% endfor %}
                <tr class="h6">
                    <td></td>
                    <td></td>
                    <td></td>
                    <td class="text-center">
                        <text>Total:</text>
                    </td>
                    <td class="text-center">
                        <text name="totalc" id="totalc{{x.category_number}}" class="totalcolumn"></text>
                    </td>
                    <td>
                    </td>
                </tr>
            </tbody>
        </table>
        {% endfor %}
        Total:
        <text name="totalall" id="totalall"></text>
    </form>
</div> {% endblock form %}